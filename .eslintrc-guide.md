# JavaScript/HTML Linting Guide

## Overview
This project uses **ESLint** with two plugins to lint HTML templates and embedded JavaScript:
- **@html-eslint/eslint-plugin** - Validates HTML structure
- **eslint-plugin-html** - Extracts and lints JavaScript from `<script>` tags

## Running Linters

```bash
# Lint JavaScript/HTML only
npm run lint
make lint-js

# Auto-fix issues
npm run lint:fix

# Lint Python only
make lint

# Lint everything (Python + JavaScript)
make lint-all
```

## Current Status

✅ **0 errors** - No blocking issues
⚠️ **15 warnings** - Minor suggestions:
- Missing `type` attribute on some buttons (cosmetic)
- `console.log` statements (useful for debugging)

## What Gets Linted

### HTML Rules
- No duplicate IDs or attributes
- Proper closing tags
- No obsolete HTML tags
- Button accessibility

### JavaScript Rules
- No `var` (use `const`/`let`)
- Use strict equality (`===`)
- No `eval()` or implied eval
- No unused variables (except onclick handlers)
- Warn on console statements

## Configuration

**Files:**
- `.eslintrc.js` - ESLint configuration
- `package.json` - Node.js dependencies and scripts
- `.eslintignore` - Excluded files/folders

**Key Settings:**
- Allows `alert()` and `confirm()` for UI feedback
- Ignores unused functions matching onclick handler patterns: `new*`, `edit*`, `save*`, `delete*`, etc.
- Relaxed HTML indentation rules (templates have their own style)
- Bootstrap 5 globals defined (`bootstrap`, `fetch`, `alert`, `confirm`, `FormData`)

## CI Integration

JavaScript linting runs in GitHub Actions alongside Python linting:
- Workflow: `.github/workflows/test.yml`
- Job: `lint-js`
- Runs on: `ubuntu-latest` with Node.js 18

## Adding New Templates

When creating new HTML templates:
1. Place in `templates/` directory
2. ESLint will automatically check them (matches `templates/**/*.html`)
3. Use `npm run lint:fix` to auto-fix minor issues
4. Add any global functions to `.eslintrc.js` if needed

## Disabling Rules

For specific cases, you can disable rules:

```javascript
/* eslint-disable no-console */
console.log("Debug info");
/* eslint-enable no-console */

// Or for a single line:
console.log("Debug info"); // eslint-disable-line no-console
```

For HTML:
```html
<!-- eslint-disable @html-eslint/require-button-type -->
<button class="btn">Click</button>
<!-- eslint-enable @html-eslint/require-button-type -->
```

## Troubleshooting

**"ESLint configuration ... was not found"**
- Run `npm install` to install dependencies

**"Cannot find module 'eslint'"**
- Ensure Node.js 18+ is installed
- Run `npm install`

**Too many warnings**
- Warnings don't fail CI/CD
- Only errors block builds
- Adjust rules in `.eslintrc.js` if needed
